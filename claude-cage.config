claude_cage {

    -- Project name (required - sets defaults for userAppend and sync)
    project = "myproject",

    -- Base user name (default: "claude")
    -- user = "claude",

    -- User isolation mode (default: "single")
    -- Options: "single" or "per-project"
    --
    -- Single-user mode (RECOMMENDED): All projects share one user
    --   - Username: "claude" (just the base username)
    --   - User home: /home/claude/ (standard location)
    --   - Network rules: Shared across projects, persist until last instance exits
    --   - Claude Code authentication: Login once, works for all projects
    --   - Use when: Most situations (simpler, easier to manage)
    --
    -- Per-project mode: Each project gets its own user
    --   - Username: "claude-myproject" (user + "-" + userAppend or project)
    --   - User home: /home/.claude-cage/claude-myproject/
    --   - Network rules: Project-specific, cleaned up when project exits
    --   - Claude Code authentication: Requires login for each new project user
    --   - Use when: Different projects need different security policies
    --
    -- userMode = "single",

    -- Optional: Custom suffix for per-project mode (overrides using project name)
    -- Only applies when userMode = "per-project"
    -- userAppend = "myproject",

    -- Source directory under current directory to allow reading from
    -- If not provided, defaults to project name
    -- source = "my-directory",

    -- Sync directory for unison to sync source with
    -- If empty, uses syncPrepend + project (or source if no project)
    -- sync = "claude-myproject",

    -- Prefix for auto-generated sync directory name
    -- syncPrepend = "claude-",

    -- Mounted directory name created under the user's home directory
    -- Default: "claude" (not based on source/project)
    -- mounted = "claude",

    -- Show ASCII art banner (default: true)
    -- Set to false to disable banner, or use --no-banner CLI flag
    -- showBanner = false,

    -- Files/folders that Claude should not have access to and should not be synced
    -- excludePath: exact paths relative to source root
    excludePath = { "target", "dist", ".env" },

    -- excludeName: files/folders by name anywhere in the tree
    excludeName = { "*.tmp", ".DS_Store" },

    -- excludeRegex: regex patterns for complex matching
    -- excludeRegex = { ".*\\.log$" },

    -- belowPath: entire directory trees
    -- belowPath = { "node_modules" },

    -- Network restrictions (optional - defense in depth)
    -- networkMode = "disabled",  -- Options: "disabled", "allowlist", "blocklist"

    -- NOTE: In single-user mode (default), network rules are shared across all
    -- projects and persist until the last instance exits. In per-project mode,
    -- each project gets its own network rules.

    -- Allowlist mode: Only allow specific connections (everything else blocked)
    -- allowedDomains = { "github.com:443", "registry.npmjs.org:443" },
    -- allowedIPs = { "127.0.0.1:5432" },
    -- allowedNetworks = { "192.168.1.0/24" },

    -- Blocklist mode: Block specific connections (everything else allowed)
    -- blockNetworks = { "127.0.0.1", "192.168.0.0/16", "10.0.0.0/8" },
    -- blockDomains = { "internal.company.com" },
    -- blockIPs = { "169.254.169.254" },

    -- Blocklist exceptions: Allow specific connections even when blocked
    -- (Can use allowedDomains/IPs/Networks in blocklist mode for exceptions)
    -- allowedIPs = { "127.0.0.1:5432" },  -- Allow PostgreSQL even if localhost blocked
}

