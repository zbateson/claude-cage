claude_cage {

    -- Project name (required)
    -- Sync mode: Sets defaults for userAppend and sync directory name
    -- Direct mount mode: Used as identifier and for per-project username
    project = "myproject",

    -- Base user name (default: "claude")
    -- user = "claude",

    -- User isolation mode (default: "single")
    -- Options: "single" or "per-project"
    --
    -- Single-user mode (RECOMMENDED): All projects share one user
    --   - Username: "claude" (just the base username)
    --   - User home: /home/claude/ (standard location)
    --   - Network rules: Shared across projects, persist until last instance exits
    --   - Claude Code authentication: Login once, works for all projects
    --
    -- Per-project mode: Each project gets its own user
    --   - Username: "claude-myproject" (user + "-" + userAppend or project)
    --   - User home: /home/.claude-cage/claude-myproject/
    --   - Network rules: Project-specific, cleaned up when project exits
    --   - Claude Code authentication: Requires login for each new project user
    --
    -- userMode = "single",

    -- Optional: Custom suffix for per-project mode (overrides using project name)
    -- Only applies when userMode = "per-project"
    -- userAppend = "myproject",

    -- ============================================================================
    -- MODE SELECTION: Choose sync mode (default) or direct mount mode
    -- ============================================================================

    -- Direct mount mode (default: false)
    -- false: Sync mode - creates sync directory with unison, provides file exclusion
    -- true: Direct mount mode - mounts source directly, no sync, no duplication
    --       WARNING: No file exclusion in direct mount mode - all files accessible
    --       Only use with directories containing files safe for Claude to access
    -- directMount = false,

    -- ============================================================================
    -- SYNC MODE SETTINGS (ignored in direct mount mode)
    -- ============================================================================

    -- Source directory under current directory to allow reading from
    -- Sync mode: If not provided, defaults to project name
    -- Direct mount mode: Defaults to "." (current directory) if not set
    -- source = "my-directory",

    -- Sync directory for unison to sync source with (sync mode only)
    -- If empty, uses syncPrepend + project (or source if no project)
    -- sync = ".caged-myproject",

    -- Prefix for auto-generated sync directory name (default: ".caged-", sync mode only)
    -- Creates hidden sync directories to keep workspace clean
    -- syncPrepend = ".caged-",

    -- Mount configuration
    -- mountBase: Base directory under user home (default: "caged")
    --   Set to "" to mount directly under user home
    --   Example: mountBase = "caged" → /home/claude/caged/<project>/
    --   Example: mountBase = "" → /home/claude/<project>/
    -- mountBase = "caged",

    -- mounted: Final directory name (default: project name)
    --   This is the actual working directory where Claude starts
    --   Example: mounted = "my-app" → /home/claude/caged/my-app/
    -- mounted = "",  -- Defaults to project name

    -- Show ASCII art banner (default: true)
    -- Set to false to disable banner, or use --no-banner CLI flag
    -- showBanner = false,

    -- ============================================================================
    -- FILE EXCLUSION (SYNC MODE ONLY - ignored in direct mount mode)
    -- ============================================================================

    -- PROJECT-SPECIFIC excludes (add to user/system defaults)
    -- These are merged with excludes from system and user configs
    -- Common defaults are already set in example-user-config

    -- excludePath: exact paths relative to source root
    -- excludePath = { "config/production.yml", "deploy/secrets.txt" },

    -- excludeName: files/folders by name anywhere in the tree
    -- Defaults from example-user-config include: .env, secrets.json, *.key, *.pem,
    -- node_modules, target, .venv, vendor, __pycache__, build, dist
    --
    -- Add project-specific excludes:
    -- excludeName = { "application-*.properties" },  -- Spring Boot configs

    -- excludeRegex: regex patterns for complex matching
    -- excludeRegex = { ".*\\.log$" },

    -- belowPath: paths at the root and everything below them
    -- Default from example-user-config: .git
    --
    -- Note: belowPath only matches at the specified path from root, not everywhere
    -- Use excludeName for directories that can appear anywhere (like node_modules)
    -- belowPath = {},

    -- ============================================================================
    -- NETWORK RESTRICTIONS (optional - defense in depth)
    -- ============================================================================

    -- Defaults from example-user-config:
    --   networkMode = "blocklist"
    --   blockNetworks = { "127.0.0.1" }
    --   allowedIPs = { common database and dev server ports }
    --
    -- Add project-specific overrides if needed:

    -- networkMode = "disabled",  -- Options: "disabled", "allowlist", "blocklist"

    -- NOTE: In single-user mode (default), network rules are shared across all
    -- projects and persist until the last instance exits. In per-project mode,
    -- each project gets its own network rules.

    -- Allowlist mode: Only allow specific connections (everything else blocked)
    -- allowedDomains = { "github.com:443", "registry.npmjs.org:443" },
    -- allowedIPs = { "127.0.0.1:5432" },
    -- allowedNetworks = { "192.168.1.0/24" },

    -- Blocklist mode: Block specific connections (everything else allowed)
    -- blockNetworks = { "127.0.0.1", "192.168.0.0/16", "10.0.0.0/8" },
    -- blockDomains = { "internal.company.com" },
    -- blockIPs = { "169.254.169.254" },

    -- Blocklist exceptions: Allow specific connections even when blocked
    -- (Can use allowedDomains/IPs/Networks in blocklist mode for exceptions)
    -- allowedIPs = { "127.0.0.1:5432" },  -- Allow PostgreSQL even if localhost blocked
}
