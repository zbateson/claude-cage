-- Example system-wide config for claude-cage
-- Place at: /etc/claude-cage/config
--
-- This file provides system-wide defaults for all users.
-- Users can override these in ~/.config/claude-cage/config
-- Projects can override these in ./claude-cage.config (required)

claude_cage {
    -- Project name is required in local config (./claude-cage.config)
    -- Not typically set in system-wide config
    -- project = "myproject",

    -- Default user to run claude as
    user = "claude",

    -- User persistence (default: false)
    -- Set to true if you want users to persist system-wide
    -- persistUser = true,

    -- Show ASCII art banner (default: true)
    -- showBanner = false,

    -- Default prefix for sync directories
    syncPrepend = "claude-",

    -- Common excludes that apply to all projects
    -- Use excludePath for specific directories at the root
    excludePath = {
        ".git",
        "target"
    },

    -- Use excludeName for files/folders by name anywhere
    excludeName = {
        ".DS_Store",
        "*.swp",
        "*~"
    },

    -- Use belowPath to exclude entire directory trees
    belowPath = {
        "node_modules"
    },

    -- Network restrictions (optional - defense in depth)
    -- Default to disabled; users/projects can override
    networkMode = "disabled",

    -- Allowlist mode example: Only allow Claude's required domains
    -- Claude Code requires these domains to function:
    allowedDomains = { "api.anthropic.com", "claude.ai", "statsig.anthropic.com", "sentry.io" },

    -- Block private networks by default (uncomment networkMode to enable)
    -- NOTE: If you need to allow specific services on blocked networks,
    -- use allowedIPs or allowedNetworks exceptions (see below)
    -- networkMode = "blocklist",
    blockNetworks = {
        "127.0.0.1",             -- Localhost
        "192.168.0.0/16",        -- Private networks
        "10.0.0.0/8"             -- Corporate network
    },

    -- Additional blocklist options
    -- blockDomains = {
    --     "internal.company.com",  -- Block internal corporate domain
    --     "malicious-site.com"     -- Block known malicious domains
    -- },
    -- blockIPs = {
    --     "169.254.169.254",       -- Cloud metadata services (AWS, Azure, GCP)
    --     "192.168.1.100:5432"     -- Block PostgreSQL on specific server
    -- },

    -- Blocklist exceptions: allow specific connections even when blocked
    -- Example: Block all private network except specific development services
    -- allowedIPs = { "127.0.0.1:5432", "192.168.1.50:3000" },  -- Allow PostgreSQL, dev server
}
