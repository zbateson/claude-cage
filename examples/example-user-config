-- Example user config for claude-cage
-- Place at: ~/.config/claude-cage/config
--
-- This file overrides system defaults with user preferences.
-- Projects can still override these in ./claude-cage.config (required)

claude_cage {
    -- Project name is required in local config (./claude-cage.config)
    -- Not typically set in user config
    -- project = "myproject",

    -- Base user name (default: "claude")
    -- user = "claude",

    -- User isolation mode (default: "single")
    -- Options: "single" or "per-project"
    --
    -- Single-user mode (RECOMMENDED): All projects share one user
    --   - Username: "claude" (just the base username)
    --   - User home: /home/claude/ (standard location)
    --   - Network rules: Shared across projects, persist until last instance exits
    --   - Claude Code authentication: Login once, works for all projects
    --
    -- Per-project mode: Each project gets its own user
    --   - Username: "claude-myproject" (user + "-" + userAppend or project)
    --   - User home: /home/.claude-cage/claude-myproject/
    --   - Network rules: Project-specific, cleaned up when project exits
    --   - Claude Code authentication: Requires login for each new project user
    --
    -- userMode = "single",

    -- Optional: Custom suffix for per-project mode (overrides using project name)
    -- Only applies when userMode = "per-project"
    -- userAppend = "custom-suffix",

    -- Override default sync prefix if desired
    -- syncPrepend = "my-custom-prefix-",

    -- Show ASCII art banner (default: true)
    -- showBanner = false,

    -- Add user-specific excludes (merged with system excludes)
    -- Use excludeRegex for pattern matching
    excludeRegex = {
        ".*\\.log$"
    },

    -- Use excludeName for temporary files
    excludeName = {
        "*.tmp"
    },

    -- Network restrictions (optional)
    -- NOTE: In single-user mode (default), network rules are shared across all
    -- projects and persist until the last instance exits. In per-project mode,
    -- each project gets its own network rules.
    -- networkMode = "blocklist",

    -- Block private networks by default (uncomment networkMode to enable)
    -- NOTE: If you need to allow specific services on blocked networks,
    -- use allowedIPs or allowedNetworks exceptions (see below)
    blockNetworks = {
        "127.0.0.1",             -- Localhost
        "192.168.0.0/16",        -- Private networks
        "10.0.0.0/8"             -- Corporate network
    },

    -- Additional blocklist options
    -- blockDomains = {
    --     "facebook.com",          -- Block social media
    --     "twitter.com:443"        -- Block Twitter HTTPS only
    -- },
    -- blockIPs = {
    --     "192.168.1.100:22"       -- Block SSH to your NAS
    -- },

    -- Blocklist exceptions: allow specific connections even when blocked
    -- Example: Allow local database
    -- allowedIPs = { "127.0.0.1:5432" },  -- Allow PostgreSQL

    -- Or use allowlist for maximum security
    -- networkMode = "allowlist",
    -- allowedDomains = {
    --     "github.com:443",        -- Only HTTPS to GitHub
    --     "registry.npmjs.org:443" -- Only HTTPS to npm
    -- }
}
